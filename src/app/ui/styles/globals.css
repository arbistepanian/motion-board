@import "tailwindcss";
@import "./themes.css";

html {
    transition: background-color 0.3s ease, color 0.3s ease;

    overflow-y: auto !important; /* not auto */
    scrollbar-gutter: stable !important;
    padding-right: 0px !important;
}

body {
    background: var(--background);
    color: var(--foreground);
    font-family: Arial, Helvetica, sans-serif;
    background-color: --color-indigo-600;

    scrollbar-gutter: stable !important;
}

.hide-if-empty:empty {
    display: none;
}

.dot {
    animation: blink 1.4s infinite;
    font-size: 1.5rem;
    line-height: 1;
    margin-top: -8px;
}

.dot-1 {
    animation-delay: 0s;
}
.dot-2 {
    animation-delay: 0.2s;
}
.dot-3 {
    animation-delay: 0.4s;
}

@keyframes blink {
    0% {
        opacity: 0.2;
    }
    20% {
        opacity: 1;
    }
    100% {
        opacity: 0.2;
    }
}

@layer components {
    .btn {
        @apply inline-flex items-center justify-center gap-2
         text-sm font-medium rounded transition
         px-3 py-1 cursor-pointer
         disabled:cursor-not-allowed;
    }

    .btn-primary {
        @apply text-[var(--color-on-primary)] bg-[var(--color-primary)];
    }

    .btn-primary:hover {
        @apply bg-[var(--color-primary-hover)] text-[var(--color-on-primary-hover)];
    }

    .btn-primary:active {
        @apply bg-[var(--color-primary-active)];
    }

    .btn-primary:disabled {
        @apply bg-[var(--color-disabled)] text-[var(--color-on-disabled)] opacity-70;
    }

    .btn-secondary {
        @apply bg-[var(--color-disabled)] text-[var(--color-text)];
    }

    .btn-secondary:hover {
        @apply bg-[var(--color-border)] text-black;
    }

    .btn-secondary:active {
        @apply text-black;
    }

    .btn-secondary:disabled {
        @apply bg-[var(--color-disabled)] text-[var(--color-on-disabled)] opacity-70;
    }

    .btn-ghost {
        @apply bg-transparent text-[var(--color-text)];
    }

    .btn-ghost:hover {
        @apply bg-[var(--color-surface-alt)] text-[var(--color-text)];
    }

    .btn-ghost:active {
        @apply text-[var(--color-primary-active)];
    }

    .btn-ghost:disabled {
        @apply text-[var(--color-on-disabled)] opacity-70;
    }

    .btn-danger {
        @apply bg-[var(--color-danger)] text-[var(--color-on-danger)];
    }

    .btn-danger:disabled {
        @apply opacity-50 cursor-not-allowed;
    }

    .textbox {
        @apply w-full rounded-md px-2 py-1 text-sm font-normal 
             bg-[var(--color-surface)] text-[var(--color-text)] 
             border border-[var(--color-border)] 
             placeholder-[var(--color-placeholder)] 
             focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] 
             focus:border-[var(--color-primary)] 
             transition duration-150 ease-in-out;
    }

    .textbox:focus-within {
        border-color: transparent;
        box-shadow: 0 0 0 2px var(--color-primary);
    }

    .textbox:disabled {
        @apply bg-[var(--color-disabled)] text-[var(--color-on-disabled)] 
             border-[var(--color-border)] opacity-70 cursor-not-allowed;
    }

    .label {
        @apply text-sm text-[var(--color-text)];
    }

    .spinner {
        border: 2px solid transparent;
        border-top-color: var(--color-on-primary);
        border-radius: 9999px;
        animation: spin 0.8s linear infinite;
    }

    .slider {
        @apply appearance-none w-full h-2 bg-gray-300 rounded;

        /* Track */
    }
    .slider::-webkit-slider-runnable-track {
        height: 0.5rem;
        background: var(--color-surface-alt);
        border-radius: 999px;
    }
    .slider::-moz-range-track {
        height: 0.5rem;
        background: var(--color-surface-alt);
        border-radius: 999px;
    }

    /* Thumb */
    .slider::-webkit-slider-thumb {
        @apply appearance-none;
        height: 1rem;
        width: 1rem;
        background: var(--color-accent);
        border-radius: 999px;
        cursor: pointer;
        margin-top: -4px; /* Align thumb with track */
    }
    .slider::-moz-range-thumb {
        height: 1rem;
        width: 1rem;
        background: var(--color-accent);
        border-radius: 999px;
        cursor: pointer;
    }

    @layer components {
        .a-link {
            @apply text-[var(--color-text)] dark:text-[var(--color-text)] hover:text-[var(--color-text-hover)] dark:hover:text-[var(--color-text-hover)] underline transition-colors duration-200;
        }
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    @media (prefers-reduced-motion: reduce) {
        * {
            animation: none !important;
            transition: none !important;
        }
    }

    /* Fade/slide in on first paint */
    .reveal {
        opacity: 0;
        transform: translateY(24px);
        /* First-paint friendly transition */
        transition: opacity 750ms ease, transform 500ms ease;
    }
    .reveal.revealed {
        opacity: 1;
        transform: translateY(0);
    }
}
